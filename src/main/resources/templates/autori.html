<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
		<title th:text="'Autori'"></title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com">
		<link href="https://fonts.googleapis.com/css2?family=Lato&display=swap" rel="stylesheet">
    	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    	<style>
    		body{
    			font-family: 'Lato', sans-serif;
    		}
    		
    	</style>
	</head>
<body>
	<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top">
			  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
			    <span class="navbar-toggler-icon"></span>
			  </button>
			  <div class="collapse navbar-collapse" id="navbarNav">
			    <ul class="navbar-nav mx-auto">
			      <li class="nav-item">
			        <a class="nav-link" th:text="'Home'" th:href="@{/}"></a>
			      </li>
			      <li class="nav-item">
			        <a class="nav-link" th:text="'Libri'" th:href="@{/libri}"></a>
			      </li>
			      <li class="nav-item">
			        <a class="nav-link" th:text="'Autori'" th:href="@{/autori}"></a>
			      </li>
			      <li class="nav-item">
			        <a class="nav-link" th:text="'Categorie'" th:href="@{/categorie}"></a>
			      </li>
			    </ul>
			  </div>
		</nav>
	<div class="container-fluid">
			<div class="row mt-4">
				<div class="col text-center">
					<h1 th:text="'AUTORI'"></h1>
				</div>
			</div>
			<div class="row mt-4">
				<div class="col-md-6">
					<div class="col-12 text-center">
					  <h4 th:text="'AUTORI'"></h4>
					</div>
					<table class="table table-striped table-responsive text-center">
						<thead class="text-center">
							<tr>
								
								<th class="align-middle" th:text="'Nome'"></th>
								<th class="align-middle" th:text="'Cognome'"></th>
								
							</tr>
						</thead>
						<tbody>
							<tr th:each="a : ${autori}">
								<td th:text="${a.nome}" class="align-middle">
								
								</td>
								<td th:text="${a.cognome}" class="align-middle"></td>
								<td class=" align-middle text-end">
									<a th:href="@{/autori/elimina(id=${a.id})}" class="btn btn-danger btn-sm" 
										th:text="'Elimina'"></a>
								</td>
								<td class=" align-middle text-end">
									<a th:href="@{/autori(id=${a.id})}" class="btn btn-warning btn-sm" 
										th:text="'Modifica'"></a>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="col-md-1"></div>
			 <div class="col-md-4 ">
				<form th:object="${autore}" method="POST">
				  <div class="row">
					<div class="col-12 text-center">
					  
					  <h4 th:text="'REGISTRA AUTORE'" id="registraAutore"></h4>
					</div>
				  </div>
				  <div class="row mt-2">
					<div class="col-12">
					  <label for="nome" th:text="'Nome'"></label>
					  <input type="text" id="nome" name="nome" class="form-control" th:value="${autore.nome}" th:field="*{nome}" required="required">
					  <p th:if="${#fields.hasErrors('nome')}" th:errors="*{nome}"></p>
					</div>
					<div class="col-12">
					  <input type="hidden" name="autoreId" id="autoreId" th:value="${autore.id}">
					</div>
				  </div>
				  <div class="row mt-2">
  					<div class="col">
    					<label for="cognome" th:text="'Cognome'"></label>
						<input type="text" id="cognome" name="cognome" th:field="*{cognome}" class="form-control" th:value="${autore.cognome}" required="required">
						<p th:if="${#fields.hasErrors('cognome')}" th:errors="*{cognome}"></p>
    				</div>
				</div>
				<div class="row mt-4">
							<div class="col-12 text-center" id="btn">
								<input type="submit" value="Registra Autore" class="btn btn-success" id="btnRegistrazione">
								&emsp;
					
								
							</div>
						</div>
						
					</form>
				</div>
			</div>
		</div>
		<script>
	var autoreId = document.getElementById('autoreId').value;
	if (window.location.pathname === '/autori' && window.location.search === `?id=${autoreId}`) {
        var link = document.createElement('a');
        var div = document.getElementById('btn');
        registraAutore.innerHTML="<h4>MODIFICA AUTORE</h4>";
        btnRegistrazione.value="Salva modifiche"
        link.href = '/autori';
        link.textContent = 'torna alla aggiunta';
        link.className = 'btn btn-primary';
        btn.appendChild(link);
      }
	
    </script>
</body>
</html>